mqtt:
  host: mqtt
  user: '{FRIGATE_MQTT_USER}'
  password: '{FRIGATE_MQTT_PASS}'
  port: 1883
  topic_prefix: frigate
  client_id: frigate

detectors:
  coral:
    type: edgetpu
    device: usb

record:
  enabled: true
  alerts:
    retain: {}
  detections:
    retain:
      days: 1
snapshots:
  enabled: true
  required_zones:
    - driveway
  #   - secondary_park

go2rtc:
  streams:
    # Recommended settings https://docs.frigate.video/configuration/camera_specific#reolink-cameras
    sentinel:
      # - ffmpeg:http://{FRIGATE_RTSP_CAM1_IP}/flv?port=1935&app=bcs&stream=channel0_main.bcs&user={FRIGATE_RTSP_USER}&password={FRIGATE_RTSP_PASS}#video=copy#audio=copy#audio=opus
      - rtsp://{FRIGATE_RTSP_USER}:{FRIGATE_RTSP_PASS}@{FRIGATE_RTSP_CAM1_IP}:554/h264Preview_01_main
    sentinelsub:
      # - ffmpeg:http://{FRIGATE_RTSP_CAM1_IP}/flv?port=1935&app=bcs&stream=channel0_ext.bcs&user={FRIGATE_RTSP_USER}&password={FRIGATE_RTSP_PASS}
      - rtsp://{FRIGATE_RTSP_USER}:{FRIGATE_RTSP_PASS}@{FRIGATE_RTSP_CAM1_IP}:554/h264Preview_01_sub
    # sauron:
    #   - ffmpeg:http://{FRIGATE_RTSP_CAM2_IP}/flv?port=1935&app=bcs&stream=channel0_main.bcs&user={FRIGATE_RTSP_USER}&password={FRIGATE_RTSP_PASS}#video=copy#audio=copy#audio=opus
    # sauronsub:
    #   - ffmpeg:http://{FRIGATE_RTSP_CAM2_IP}/flv?port=1935&app=bcs&stream=channel0_ext.bcs&user={FRIGATE_RTSP_USER}&password={FRIGATE_RTSP_PASS}#video=copy

    # Direct rtsp (unused)
    sauron:
      - rtsp://{FRIGATE_RTSP_USER}:{FRIGATE_RTSP_PASS}@{FRIGATE_RTSP_CAM2_IP}:554/h264Preview_01_main
    sauronsub:
      - rtsp://{FRIGATE_RTSP_USER}:{FRIGATE_RTSP_PASS}@{FRIGATE_RTSP_CAM2_IP}:554/h264Preview_01_sub

objects:
  track:
    - person
    - car
    - dog
    - cat

cameras:
  sentinel:
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/sentinel
          input_args: preset-rtsp-restream
          roles:
            - record
        - path: rtsp://127.0.0.1:8554/sentinelsub
          input_args: preset-rtsp-restream
          roles:
            - detect
      # output_args:
      #   record: preset-record-generic-aac  # good default if your cam outputs AAC
    detect:
      width: 640
      height: 360
    zones:
      driveway:
        coordinates: 
          0.299,0.253,0.312,0.36,0.174,0.349,0.005,0.659,0.881,0.928,0.879,0.629,0.799,0.611,0.803,0.553,0.88,0.42,0.772,0.366,0.68,0.405,0.572,0.406,0.481,0.392,0.427,0.35,0.404,0.271
        inertia: 3
        loitering_time: 0
      street_park:
        coordinates: 0.463,0.229,0.495,0.116,0.726,0.145,0.714,0.286
        inertia: 3
        loitering_time: 3
        objects: car
        filters:
          car:
            threshold: 0.5 # Lower confidence allowed here
            # stationary:
            #   enabled: true
            #   max_frames: 150   # ~5 seconds at 30fps
      driveway_park:
        coordinates: 0.172,0.352,0.415,0.387,0.432,0.767,0.022,0.639
        loitering_time: 1
        objects: car
        filters:
          car:
            threshold: 0.4 # Lower confidence allowed here
            # stationary:
            #   enabled: true
            #   max_frames: 150   # ~5 seconds at 30fps
      bins:
        coordinates: 0.76,0.619,0.738,0.879,0.881,0.925,0.88,0.626
        inertia: 3
        loitering_time: 1
    motion:
      mask:
        - 0.136,0.703,0.069,0.914,0.149,0.998,0.728,1,0.777,0.897
        - 0.226,0.073,0.486,0.07,0.751,0.108,0.795,0.123,0.891,0.273,0.889,0.344,0.951,0.42,0.999,0.422,0.998,0.002,0.212,0
    review:
      alerts:
        required_zones: driveway
  sauron:
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/sauron
          input_args: preset-rtsp-restream
          roles:
            - record
        - path: rtsp://127.0.0.1:8554/sauronsub
          input_args: preset-rtsp-restream
          roles:
            - detect
      # output_args:
      #   record: preset-record-generic-aac  # good default if your cam outputs AAC
    detect:
      width: 640
      height: 480
    zones:
      deck:
        coordinates: 
          0.366,0.357,0.351,0.223,0.58,0.156,0.754,0.164,0.887,0.17,0.889,0.393
        loitering_time: 0
        objects:
          - person
          - dog
        inertia: 3
version: 0.16-0
detect:
  enabled: true
